# 多值注入

## 可选依赖

如果在实例化一个依赖项时，它的依赖未被注入器所持有，那么就会抛出错误。

```ts highlight=3,8
class MapService {
  constructor(
    @Inject(SatelliteService) private readonly satellite: SatelliteService
  ) {}
}

const injector = new Injector([[MapService]])
injector.get(MapService) // ERROR
```

此时，你可以通过将 `Inject` 替换为 `Optional` 来将该依赖标记为可选的：

```ts highlight=3,8
class MapService {
  constructor(
    @Optional(SatelliteService) private readonly satellite?: SatelliteService
  ) {}
}

const injector = new Injector([MapService])
injector.get(MapService)
```

此时 `MapService` 可以被实例化，但 `satellite` 为 `undefined`。

## 多值依赖

类似的，可以用 `Many` 装饰器通过一个标识符注入多个依赖项：

```ts highlight=3,9-10
class MapService {
  constructor(
    @Many(ISatelliteService) private readonly satellites: ISatelliteService[]
  ) {}
}

const injector = new Injector([
  [MapService],
  [ISatelliteService, { useClass: GPSSatellite }],
  [ISatelliteService, { useClass: BeidouSatellite }],
])
injector.get(MapService)
```
